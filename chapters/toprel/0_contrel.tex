\section{The category \textbf{ContRel}}

\marginnote{
\begin{proposition}\label{prop:func}
Continuous functions are always continuous. If $f: X^\tau \rightarrow Y^\sigma$ is a continuous function, then it is also a continuous relation.
\begin{proof}
Functions are special cases of relations. The relational converse of a function viewed in this way is the same thing as the preimage.
\end{proof}
\end{proposition}
}

\marginnote{
\begin{corollary}\label{corr:top2contrel}
There is a faithful, identity-on-objects monoidal embedding $\mathbf{Top} \hookrightarrow \mathbf{ContRel}$.
\end{corollary}
}

\marginnote{
\begin{proposition}\label{prop:idrel}
The \textbf{identity relation} $X \rightarrow X$ relates anything to itself. It is defined $\{(x,x) : x \in X\} \subseteq X \times X$. The identity relation is always continuous.
\begin{proof}
The preimage of any open set under the identity relation is itself, which is open by assumption. The identity relation is also the trivial continuous function from a space to itself, so this also follows from Proposition \ref{prop:func}.
\end{proof}
\end{proposition}
}

\begin{marginfigure}\label{fig:copy}
\centering
\tikzfig{bestiary/copy}
\caption{The \emph{copy} map $X^\tau \rightarrow X^\tau \times X^\tau$, $\{(x,\begin{pmatrix} x \\ x \end{pmatrix}) \ | \ x \in X\}$.}
\end{marginfigure}

\marginnote{
\begin{proposition}\label{prop:copy}
Copy maps are continuous relations.
\begin{proof}
For a direct proof, we draw on the fact that given a basis $\mathfrak{b}$ for a topology $\tau$, ordered pairs of $\mathfrak{b}$ form a basis for the product topology $\tau \times \tau$. To show that the preimage of an open in $\tau \times \tau$ is open in $\tau$, we may consider the preimage under the copy map of basis elements of $\tau \times \tau$, which are intersections of pairs of basis elements of $\tau$, and hence definitionally open. By closure of opens under arbitrary unions, all opens of $\tau \times \tau$ have an open preimage in $\tau$.
\end{proof}
\end{proposition}
}

\begin{marginfigure}
\centering
\[\begin{tikzcd}[ampersand replacement=\&]
    \& {X^\tau} \\
    {X^\tau} \& {(X \times X)^{(\tau \times \tau)}} \& {X^\tau}
    \arrow["id"', from=1-2, to=2-1]
    \arrow["id", from=1-2, to=2-3]
    \arrow["{\pi_0}", from=2-2, to=2-1]
    \arrow["{\pi_1}"', from=2-2, to=2-3]
    \arrow["copy"{description}, dashed, from=1-2, to=2-2]
\end{tikzcd}\]
\caption{An alternative proof of Proposition \ref{prop:copy} follows from Proposition \ref{prop:func}, Corollary \ref{corr:top2contrel}, and the definition of the product topology as the coarsest topology that satisfies categorical product for the diagram above.}
\end{marginfigure}

\begin{marginfigure}
\centering
\tikzfig{bestiary/everything}
\caption{The \emph{everything} state is the relation $\{((\star,x) \ | \ x \in X\}$, notated as above.
\begin{proposition}
The everything states are continuous relations.
\begin{proof}
The preimage of any subset of $X$ -- in particular the opens -- is the whole of the singleton space, which is open.
\end{proof}
\end{proposition}
}
\label{fig:everything}
\end{marginfigure}

\begin{marginfigure}\label{fig:delete}
\centering
\tikzfig{bestiary/delete}
\caption{The \emph{delete} test, $\{((x,\star) \ | \ x \in X\}$.
\begin{proposition}
The delete tests are continuous relations.
\begin{proof}
There are only two opens in the singleton space. The preimage of the empty set is the empty set, and the preimage of the singleton is the whole of $X$; both are opens in $X$ by definition.
\end{proof}
\end{proposition}
}
\end{marginfigure}

\begin{marginfigure}
\centering
\scalebox{0.75}{\tikzfig{bestiary/basicrelations}}
\caption{Copy and delete satisfy the above properties, expressed as diagrammatic equations.}
\end{marginfigure}

\begin{marginfigure}
\centering
\scalebox{0.75}{\tikzfig{structure/determinism}}
\caption{Relations that interact with copy and delete are nice, and we notate them with the same black dots as for copy and delete to mark them. States are singletons, or points, when they are copiable. Partial continuous functions are those that commute with copy. Left-total relations are those that commute with delete. Continuous functions are those that satisfy the latter two criteria.}
\end{marginfigure}

\marginnote{
\begin{proposition}\label{prop:fullrel}
The \textbf{full relation} $X \rightarrow Y$ relates everything to everything. It is all of $X \times Y$. Full relations are always continuous.
\begin{proof}
For a direct proof, the preimage of any subset of $Y$ under the full relation is the whole of $X$, which is open by definition. Alternatively, the full relation is the composite of delete and then everything.
\end{proof}
\end{proposition}
}

\begin{marginfigure}
\centering
\tikzfig{bestiary/zerostgt}
\caption{
The \textbf{empty state} $\bullet \rightarrow X^\tau$ and \textbf{empty test} relate nothing. The \textbf{empty relation} $X^\tau \rightarrow Y^\sigma$ is the composite of empty tests and states, and relates nothing: as a relation it is $\varnothing \subset X \times Y$.
\begin{proposition}
Empty states, tests, and relations are continuous.
\begin{proof}
The preimage of any empty relation is the empty set, which is definitionally open.
\end{proof}
\end{proposition}
}
\end{marginfigure}

\begin{marginfigure}
\centering
\scalebox{0.75}{\tikzfig{bestiary/scalarrelations}}
\caption{There are two scalars: the unit, and the zero scalar. Zero scalars are idempotent, which diagrammatically means that a single zero scalar can copy itself.}
\end{figure}

\begin{marginfigure}
\centering
\scalebox{0.75}{\tikzfig{bestiary/zerorelations}}
\caption{There is a zero-morphism for every input-output pair of objects in \textbf{ContRel}, which is diagrammatically the composition of the empty test and state. Zero scalars turn any relation into a zero relation. Substituting the zero relation into the LHS of the above equation means that zero relations also spawn zero scalars.}
\end{marginfigure}

\begin{marginfigure}
\centering
\scalebox{0.75}{\tikzfig{bestiary/contagion}}
\caption{So, whenever a zero-process appears in a diagram, it spawns zero scalars which infect all other processes, turning them all into zero-processes. The same holds for whenever a zero-scalar appears; it makes copies of itself to infect all other processes.}
\end{marginfigure}

\begin{defn}[\textbf{ContRel}]
The (purported) category \textbf{ContRel} has topological spaces for objects and continuous relations for morphisms.
\end{defn}

\begin{proposition}[\textbf{ContRel} is a category]
continuous relations form a category $\mathbf{ContRel}$.
\begin{proof}
\newthought{Identities:} Identity relations, which are always continuous since the preimage of an open $U$ is itself.

\newthought{Composition:} The normal composition of relations. We verify that the composite $X^\tau \overset{R}{\rightarrow} Y^\sigma \overset{S}{\rightarrow} Z^\theta$ of continuous relations is again continuous as follows:
\[U \in \theta \implies S^\dag(U) \in \sigma \implies R^\dag \circ S^\dag(U) = (S \circ R)^\dag \in \tau\]

\newthought{Associativity of composition:} Inherited from \textbf{Rel}.
\end{proof}
\end{proposition}

\subsection{Symmetric Monoidal structure}

\begin{proposition}
$(\mathbf{ContRel},\bullet,X^\tau \otimes Y^\sigma := (X \times Y)^{(\tau \times \sigma)})$ is a symmetric monoidal closed category.
\begin{proof}

\newthought{Tensor Unit:} The one-point space $\bullet$. Explicitly, $\{\star\}$ with topology $\{\varnothing,\{\star\}\}$.

\newthought{Tensor Product:} For objects, $X^\tau \otimes Y^\sigma$ has base set $X \times Y$ equipped with the product topology $\tau \times \sigma$. For morphisms, $R \otimes S$ the product of relations. We show that the tensor of continuous relations is again a continuous relation. Take continuous relations $R: X^\tau \rightarrow Y^\sigma$, $S: A^\alpha \rightarrow B^\beta$, and let $U$ be open in the product topology $(\sigma \times \beta)$. We need to prove that $(R \times S)^\dag(U) \in (\tau \times \alpha)$. We may express $U$ as $\bigcup\limits_{i \in I} y_i \times b_i$, where the $y_i$ and $b_i$ are in the bases $\mathfrak{b}_\sigma$ and $\mathfrak{b}_\beta$ respectively. Since for any relations we have that $R(A \cup B) = R(A) \cup R(B)$ and $(R \times S)^\dag = R^\dag \times S^\dag$:
\begin{align*}
&(R \times S)^\dag(\bigcup\limits_{i \in I} y_i \times b_i)\\
 &= \bigcup\limits_{i \in I}(R \times S)^\dag(y_i \times b_i)\\
 &= \bigcup\limits_{i \in I}(R^\dag \times S^\dag)(y_i \times b_i)
 \end{align*}
Since each $y_i$ is open and $R$ is continuous, $R^\dag(y_i) \in \tau$. Symmetrically, $S^\dag(b_i) \in \alpha$. So each $(R^\dag \times S^\dag)(y_i \times b_i) \in (\tau \times \alpha)$. Topologies are closed under arbitrary union, so we are done.

\newthought{The natural isomorphisms are inherited from \textbf{Rel}}. We will be explicit with the unitor, but for the rest, we will only check that the usual isomorphisms from \textbf{Rel} are continuous in \textbf{ContRel}. To avoid bracket-glut, we will vertically stack some tensored expressions.

\newthought{Unitors:} The left unitors are defined as the relations $\lambda_{X^{\tau}}: \bullet \times X^\tau \rightarrow X^\tau := \{(\begin{pmatrix}\star \\x \end{pmatrix}, x) \ | \ x \in X\}$, and we reverse the pairs to obtain the inverse $\lambda^{-1}_{X^{\tau}}$. These relations are continuous since the product topology of $\tau$ with the singleton is homeomorphic to $\tau$: $U \in \tau \iff (\bullet,U) \in (\bullet \times \tau)$. These relations are evidently inverses that compose to the identity. The construction is symmetric for the right unitors $\rho_{X^{\tau}}$.

\newthought{Associators:}
The associators $\alpha_{X^{\tau}Y^{\sigma}Z^{\rho}} : ((X \times Y) \times Z)^{((\tau \times \sigma) \times \rho)} \rightarrow (X \times (Y \times Z))^{(\tau \times (\sigma \times \rho))}$ are inherited from \textbf{Rel}. They are:
\[\alpha_{X^{\tau}Y^{\sigma}Z^{\rho}} := \{\big( \ (\begin{pmatrix} x \\ y \end{pmatrix} , z) \ , \ (x, \begin{pmatrix} y \\ z \end{pmatrix}) \big) \quad | \quad x \in X \ , \ y \in Y \ ,\ z \in Z \}\]
To check the continuity of the associator, observe that product topologies are isomorphic in \textbf{Top} up to bracketing, and these isomorphisms are inherited by \textbf{ContRel}. The inverse of the associator has the pairs of the relation reversed and is evidently an inverse that composes to the identity.

\newthought{Braids:}
The braidings $\theta_{X^{\tau}Y^{\sigma}} : (X \times Y)^{\tau \times \sigma} \rightarrow (Y \times X)^{\sigma \times \tau}$ are defined:
\[\{(\begin{pmatrix} x \\ y \end{pmatrix} \ , \ \begin{pmatrix} y \\ x \end{pmatrix}) \quad | \quad x \in X \ , \ y \in Y  \}\]
The braidings inherit continuity from the isomorphisms between $X^\tau \times Y^\sigma$ and $Y^\sigma \times X^\tau$ in \textbf{Top}. They inherit everything else from \textbf{Rel}

\newthought{Coherences:}
Since we have verified all of the natural isomorphisms are continuous, it suffices to say that the coherences [] are inherited from the symmetric monoidal structure of \textbf{Rel} up to marking objects with topologies.
\end{proof}

\newthought{Monoidal Closure:}
Here is the evaluator.
\[placeholder\]
\end{proposition}

\subsection{Rig category structure}

\begin{defn}[Biproducts and zero objects]
A \emph{biproduct} is simultaneously a categorical product and coproduct. A \emph{zero object} is both an initial and a terminal object. \textbf{Rel} has biproducts (the coproduct of sets equipped with reversible injections) and a zero object (the empty set).
\end{defn}

\begin{proposition}
$\mathbf{ContRel}$ has a zero object.
\begin{proof}
As in \textbf{Rel}, there is a unique relation from every object to and from the empty set with the empty topology.
\end{proof}
\end{proposition}

\begin{proposition}
$\mathbf{ContRel}$ has biproducts.
\begin{proof}
The biproduct of topologies $X^\tau$ and $Y^\sigma$ is their direct sum topology $(X \sqcup Y)^{(\tau + \sigma)}$ -- the coarsest topology that contains the disjoint union $\tau \sqcup \sigma$. As in \textbf{Rel}, the (in/pro)jections are partial identities, which are continuous by construction. To verify that it is a coproduct, given continuous relations $R: X^\tau \rightarrow Z^\rho$ and $S: Y^\sigma \rightarrow Z^\rho$, where the disjoint union $X \sqcup Y$ of sets is $\{x_1 \ | \ x \in X\} \cup \{y_2 \ | \ y \in Y\}$, we observe that $R + S := \{ (x_1,z) \ | \ (x,z) \in R \} \cup \{ (y_2,z) \ | \ y \in S \}$ is continuous and commutes with the injections as required. The argument that it is a product is symmetric.
\end{proof}
\end{proposition}

\begin{remark}
Biproducts yield another symmetric monoidal structure which the $\times$ monoidal product distributes over appropriately to yield a rig category. Throughout the chapter we will use $\cup$, but we could have also "diagrammatised" $\cup$ by treating it as a monoid internal to \textbf{ContRel} viewed as a symmetric monoidal category with respect to the biproduct. There are at leasy two diagrammatic formalisms for rig categories that we could have used, \bR CITE \e and \bR CITE \e. Neither case is perfectly suitable due to the fact that we sometimes took unions over arbitrary indexing sets, which is alright in topology but not depictable as a finite diagram in the $\oplus$-structure. A neat fact that follows is that a topological space is compact precisely when any arbitrarily indexed $\cup$ of tests in the $\times$-structure is \emph{depictable} in the $\oplus$-structure of either diagrammatic calculus for rig categories. \textbf{FdHilb} also has a monoidal product notated $\otimes$ that distributes over the monoidal structure given by biproducts $\oplus$. In contrast, we have used $\times$ -- the cartesian product notation -- for the monoidal product of \textbf{ContRel} since that is closer to what is familiar for sets.
\end{remark}

\newthought{That's all we need for the diagrams.} The remainder of this section are endnotes for category theorists addressing the question of how \textbf{ContRel} relates to \textbf{Rel} and \textbf{Top}, and some conceptual motivations for topological relations. If none of that interests you, ignore the main body: the margins carry on with diagrammatic facts about \textbf{ContRel}.

\newpage

\subsection{Category-theoretic endnotes}

\newthought{\textbf{ContRel} and \textbf{Rel} are related by a free-forgetful adjunction}

We provide free-forgetful adjunctions relating \textbf{ContRel} to \textbf{Rel} by "forgetting topology" and sending sets to "free" discrete topologies. We exhibit a free-forgetful adjunction between \textbf{Rel} and \textbf{ContRel}.

\begin{lemma}[Any relation $R$ between discrete topologies is continuous]\label{lem:disccont}
\begin{proof}
All subsets in a discrete topologies are open.
\end{proof}
\end{lemma}

\begin{defn}[L: $\mathbf{Rel} \rightarrow \mathbf{ContRel}$] We define the action of the functor $L$:
\begin{description}
\item[On objects] $L(X) := X^\star$, ($X$ with the discrete topology)
\item[On morphisms] $L(X \overset{R}{\rightarrow} Y) := X^\star \overset{R}{\rightarrow} Y^\star$, the existence of which in \textbf{ContRel} is provided by Lemma \ref{lem:disccont}.
\end{description}
Evidently identities and associativity of composition are preserved.
\end{defn}

\begin{defn}[R: $\mathbf{ContRel} \rightarrow \mathbf{Rel}$]
\begin{description} We define the action of the functor $R$ as forgetting the topological structure.
\item[On objects] $R(X^\tau) := X$
\item[On morphisms] $R(X^\tau \overset{S}{\rightarrow} Y^\sigma) := X \overset{S}{\rightarrow} Y$
\end{description}
Evidently identities and associativity of composition are preserved.
\end{defn}

\begin{lemma}[$RL = 1_{\textbf{Rel}}$]\label{lem:idadj}
The composite $RL$ (first $L$, then $R$) is precisely equal to the identity functor on $\mathbf{Rel}$.
\begin{proof}
On objects, $FU(X) = F(X^\star) = X$. On morphisms, $FU(X \overset{R}{\rightarrow} Y) = F(X^\star \overset{R}{\rightarrow} Y^\star) = X \overset{R}{\rightarrow} Y$
\end{proof}
\end{lemma}

\begin{rem}[Coarser and finer]
Given a set of points $X$ with two topologies $X^\tau$ and $X^\sigma$, if $\tau \subset \sigma$, we say that $\tau$ \emph{is coarser than} $\sigma$, or $\sigma$ \emph{is finer than} $\tau$.
\end{rem}

\begin{lemma}[Coarsening is a continuous relation]\label{lem:coarse}
Let $X^\sigma$ be coarser than $X^\tau$. The identity relation on underlying points $X^\tau \overset{1_X}{\rightarrow} X^\sigma$ is then a continuous relation.
\begin{proof}
The preimage of the identity of any open set $U \in \sigma, U \subseteq X$ is again $U$. By definition of coarseness, $U \in \tau$.
\end{proof}
\end{lemma}

\begin{proposition}[$L \dashv R$]\label{prop:reladj}
\begin{proof}
We verify the triangular identities governing the unit and counit of the adjunction, which we first provide. By Lemma \ref{lem:idadj}, we take the natural transformation $1_\mathbf{Rel} \Rightarrow RL$ we take to be the identity morphism:

\[\eta_{X} := 1_{X}\]

The counit natural transformation $LR \Rightarrow 1_{\mathbf{ContRel}}$ we define to be a coarsening, the existence of which in \textbf{ContRel} is granted by Lemma \ref{lem:coarse}.

\[\epsilon_{X^\tau} : X^\star \rightarrow X^\tau := \{(x,x) : x \in X\}\]

First we evaluate $L \overset{L\eta}{\rightarrow} LRL \overset{\epsilon L}{\rightarrow} L$ at an arbitrary object (set) $X \in \textbf{Rel}$. $L(X) = X^\star = LRL(X)$, where the latter equality holds because $LR$ is precisely the identity functor on \textbf{Rel}. For the first leg from the left, $L(\eta_X) = L(1_X) = X^\star \overset{1_X}{\rightarrow} X^\star = 1_{X^\star}$. For the second, $\epsilon_{L(X)} = \epsilon_{X^\star} = X^\star \overset{1_X}{\rightarrow} X^\star = 1_{X^\star}$. So we have that $L\eta ; \epsilon L = L$ as required.\\

Now we evaluate $R \overset{\eta R}{\rightarrow} RLR \overset{R \epsilon}{\rightarrow} R$ at an arbitrary object (topological space) $X^\tau \in \textbf{ContRel}$. $R(X^\tau) = X = RLR(X^\tau)$, where the latter equality again holds because $LR = 1_\textbf{Rel}$. For the first leg from the left, $\eta_{R(X^\tau)} = \eta_X = 1_{X}$. For the second, $R(\epsilon_{X^\tau}) = R(X^\star \overset{1_X}{\rightarrow} X^\tau) = X \overset{1_X}{\rightarrow} X = 1_X$. So $\eta R ; R \epsilon = R$, as required.
\end{proof}
\end{proposition}

The usual forgetful functor from \textbf{ContRel} to \textbf{Loc} has no left adjoint. Just as the forgetful functor from \textbf{ContRel} to \textbf{Rel} "forgets topology while keeping the points", we might consider a forgetful functor to \textbf{Loc} that "forgets points while remembering topology". But we show that there is no such functor that forms a free-forgetful adjunction.

\begin{rem}[The category \textbf{Loc}]\bR CITE \e
A \emph{frame} is a poset with all joins and finite meets satisfying the infinite distributive law:
\[x \wedge (\bigvee\limits_{i}y_i) = \bigvee\limits_{i}(x \wedge y_i)\]
A \emph{frame homomorphism} $\phi: A \rightarrow B$ is a function between frames that preserves finite meets and arbitrary joins, i.e.:
\[\phi(x \wedge_A y) = \phi(x) \wedge_B \phi(y) \quad \quad \quad \phi(x \vee_A y) = \phi(x) \vee_B \phi(y)\]
The category \textbf{Frm} has frames as objects and frame homomorphisms as morphisms. The category \textbf{Loc} is defined to be $\textbf{Frm}^\text{op}$.
\end{rem}

\begin{remark}
Here are informal intuitions to ease the definition. The lattice of open sets of a given topology ordered by inclusion forms a frame -- observe the analogy "arbitrary unions" : "all joins" :: "finite intersections" : "finite meets". Closure under arbitrary joins guarantees a maximal element corresponding to the open set that is the whole space. So frames are a setting to speak of topological structure alone, without referring to a set of underlying points, hence, pointless topology. Observe that in the definition of continuous functions, open sets in the \emph{codomain} must correspond (uniquely) to open sets in the \emph{domain} -- so every continuous function induces a frame homomorphism going in the opposite direction that the function does between spaces, hence, to obtain the category \textbf{Loc} such that directions align, we reverse the arrows of \textbf{Frm}. Observe that continuous relations induce frame homomorphisms in the same way. These observations give us insight into how to construct the free and forgetful functors.
\end{remark}

\begin{defn}[$U: \textbf{ContRel} \rightarrow \textbf{Loc}$]
On objects, U sends a topology $X^\tau$ to the frame of opens in $\tau$, which we denote $\hat{\tau}$.\\
On morphisms $R: X^\tau \rightarrow Y^\sigma$, the corresponding partial frame morphism $\hat{\tau} \leftarrow \hat{\sigma}$ (notice the direction reversal for \textbf{Loc}), we define to be $\{(U_{\in \sigma},R^\dagger(U)_{\in \tau}) \ | \ U \in \sigma\}$. We ascertain that this is (1) a function that is (2) a frame homomorphism. For (1), since the relational converse picks out precisely one subset given any subset as input, these pairs do define a function. For (2), we observe that the relational converse (as all relations) preserve arbitrary unions and intersections, i.e. $R^\dagger(\bigcap\limits_i U_i) = \bigcap\limits_i R^\dagger(U_i)$ and $R^\dagger(\bigcup\limits_i U_i) = \bigcup\limits_i R^\dagger(U_i)$, so we do have a frame homomorphism. Associativity follows easily.
\end{defn}

\begin{proposition}[$U$ has no left adjoint]
\begin{proof}
Seeking contradiction, if $U$ were a right adjoint, it would preserve limits. The terminal object in \textbf{Loc} is the two-element lattice $\bot < \top$, where the unique frame homomorphism to any $\mathcal{L}$ sends $\top$ to the top element of $\mathcal{L}$ and $\bot$ to the bottom element. In \textbf{ContRel}, the empty topology $\textbf{0} = (\varnothing, \{\varnothing\})$ is terminal (and initial). However, $U\textbf{0}$ is the singleton lattice, not $\bot < \top$ (which is the image under $U$ of the singleton topology).
\end{proof}
\end{proposition}

This is a rather frustrating result, because $U$ does turn continuous relations into backwards frame homomorphisms on lattices of opens; see Proposition \ref{prop:framehom}, and note that in the frame of opens associated with a topology, the empty set becomes the bottom element. The obstacle is the fact that the empty topology is both initial and terminal in \textbf{ContRel}. We may be tempted to try treating $U$ as a right adjoint going to \textbf{Frm} instead, but then the monad induced by the injunction on \textbf{Loc} would trivialise: left adjoints preserve colimits, so any putative left adjoint $F$ must send $\bot < \top$ (initial in \textbf{Frm} by duality) to the empty toplogy, and the empty topology as terminal object must be sent to the terminal singleton frame, which implies that the monad $UF$ on \textbf{Frm} sends everything to the singleton lattice.

\newthought{Why not Span(\textbf{Top})?}
One common generalisation of relations is to take spans of monics in the base category []. This actually produces a different category than the one we have defined. Below is an example of a span of monic continuous functions from \textbf{Top} that corresponds to a relation that doesn't live in \textbf{ContRel}. It is the span with the singleton as apex, with maps from the singleton to the closed points of a two Sierpi\'{n}ski spaces.

\[\tikzfig{topology/spanctrex}\]

\newthought{Why not a Kleisli construction on \textbf{Top}?}
Another way to view the category \textbf{Rel} is as the Kleisli category $K_\mathcal{P}$ of the powerset monad on \textbf{Set}; that is, every relation $A \rightarrow B$ can be viewed as a function $A \rightarrow \mathcal{P}B$, and composition works by exploiting the monad multiplication: $A \overset{f}\rightarrow \mathcal{P}B \overset{\mathcal{P}g}{\rightarrow} \mathcal{P}\mathcal{P}C \overset{\mu_{\mathcal{P}C}}{\rightarrow} \mathcal{P}C$. So it is reasonable to investigate whether there is a monad $T$ on \textbf{Top} such that $K_T$ is equivalent to \textbf{ContRel}. We observe that the usual free-forgetful adjunction between \textbf{Set} and \textbf{Top} sends the former to a full subcategory (of continuous functions between discrete topologies) of the latter, so a reasonable coherence condition we might ask for the putative monad $T$ to satisfy is that it is related to $\mathcal{P}$ via the free-forgetful adjunction. This amounts to asking for the following commutative diagram (in addition to the usual ones stipulating that $T$ and $\mathcal{P}$ are monadic):

\[\begin{tikzcd}
    {\textbf{Top}} && {\textbf{Top}} \\
    \\
    {\textbf{Set}} && {\textbf{Set}}
    \arrow[""{name=0, anchor=center, inner sep=0}, curve={height=-6pt}, from=1-1, to=3-1]
    \arrow[""{name=1, anchor=center, inner sep=0}, curve={height=-6pt}, from=3-1, to=1-1]
    \arrow[""{name=2, anchor=center, inner sep=0}, curve={height=-6pt}, from=1-3, to=3-3]
    \arrow[""{name=3, anchor=center, inner sep=0}, curve={height=-6pt}, from=3-3, to=1-3]
    \arrow["T"{description}, from=1-1, to=1-3]
    \arrow["{\mathcal{P}}"{description}, from=3-1, to=3-3]
    \arrow["\dashv"{anchor=center}, draw=none, from=1, to=0]
    \arrow["\dashv"{anchor=center}, draw=none, from=3, to=2]
\end{tikzcd}\]

This condition would be nice to have because it witnesses $K_{\mathcal{P}}$ as precisely $K_T$ restricted to the discrete topologies, so that $T$ really behaves as a conservative generalisation of the notion of relations to accommodate topologies. As a consequence of this condition, we may observe that discrete topologies $X^\star$ must be sent to discrete topologies on their powerset $\mathcal{P}X^\star$. In particular, this means the singleton topology is sent to the the discrete topology on a two-element set; $T\bullet = \textbf{2}$. This sinks us. We know from Proposition \ref{prop:tests} that the continuous relations $X^\tau \rightarrow \bullet$ are precisely the open sets of $\tau$, which correspond to continuous functions into Sierpi\'{n}ski space $X^\tau \rightarrow \mathbb{S}$, and $\mathbb{S} \neq \textbf{2}$.

\newthought{Where is the topology coming from?}

It is category-theoretically natural to ask whether \textbf{ContRel} is "giving topology to relations" or "powering up topologies with relations", but we have explored those techniques and it doesn't seem to be that. It is possible that the failure of these regular avenues may explain why I had such difficulty finding \textbf{ContRel} in the literature. However, we do have a free-forgetful adjunction between \textbf{ContRel} and \textbf{Rel}, and if we focus on this, it \emph{is} possible to crack the nut of where topology is coming from with enough machinery; here is one such sketch. Observe that the forgetful functor looks like it could be a kind of fibration, where the elements of the fibre over any set $A$ in \textbf{Rel} correspond to all possible topologies on $A$. Moreover, these topologies may be partially ordered by coarseness-fineness to form a frame (though a considering it a preorder will suffice.) The fibre over a relation $R: A \rightarrow B$ is all pairs of topologies $\tau, \sigma$ such that $R$ is continuous between $A^\tau$ and $B^\sigma$. The crucial observation is that if $R$ is continuous between $\tau$ and $\sigma$, then $R$ will be continuous for any finer topology in the domain, $\tau \leq \tau'$, and any coarser topology in the codomain $\sigma' \leq \sigma$; that is, the fibre over $R$ displays a boolean-valued profunctor between preorders. So \textbf{ContRel} can be viewed as the display category induced by a functor $\textbf{Rel} \rightarrow \mathcal{C}$, where $\mathcal{C}$ is a category with preorders for objects and boolean-enriched profunctors as morphisms, and the functor encodes topological data by sending sets in \textbf{Rel} to preorders of all possible topologies, and relations to profunctors. I have deliberately left this as a sketch because it doesn't seem worth it to view something so simple in such a complex way (I accept the charges of hypocrisy having just used weak $n$-categories to present TAGs.)

\subsection{Conceptual motivations}

\begin{figure}[h!]\label{fig:pointing}
\[\resizebox{\textwidth}{!}{\tikzfig{topology/pointingfinger}}\]
\caption{Points in space are a useful mathematical fiction. Suppose we have a point on a unit interval. Consider how we might tell someone else about where this point is. We could point at it with a pudgy appendage, or the tip of a pencil, or give some finite decimal approximation. But in each case we are only speaking of a vicinity, a neighbourhood, an \emph{open set in the borel basis of the reals} that contains the point. Identifying a true point on a real line requires an infinite intersection of open balls of decreasing radius; an infinite process of pointing again and again, which nobody has the time to do. In the same way, most language outside of mathematics is only capable of offering successively finer, finite approximations to whatever it is that occurs in the mind or in reality.}
\end{figure}

Why are continuous relations worth the trouble? Apart from enabling us to paint pictures with words, because the opens of topological spaces crudely model how we talk about concepts, and the points of a topological space crudely model instances of concepts. Figure \ref{fig:pointing} generalises to a sketch argument that insofar as we conceive of concepts in spatial terms, the meanings of words are modellable as shared strategies for spatial deixis; absolute precision is communicatively impossible, and the next best thing mathematically requires topology. This may explain the asymmetry of why tests are open sets, but why are states allowed to be arbitrary subsets? One could argue that states in this model represent what is conceived or perceived. Suppose we have an analog photograph whether in hand or in mind, and we want to remark on a particular shade of red in some uniform patch of the photograph. As in the case of pointing out a point on the real interval, we have successively finer approximations with a vocabulary of concepts: "red", "burgundy", "hex code \#800021"... but never the point in colourspace itself. If someone takes our linguistic description of the colour and tries to reproduce it, they will be off in a manner that we can in principle detect, cognize, and correct: "make it a little darker" or "add a little blue to it". That is to say, there are in principle differences in mind that we cannot distinguish linguistically in a finite manner; we would have to continue the process of "even darker" and "add a bit less blue than last time" forever. All this is just the mathematical formulation of a very common observation: sometimes you cannot do an experience justice with words, and you eventually give up with "I guess you just had to be there". Yet the experience is there and we can perform linguistic operations on it, and the states accommodate this.

\newthought{\textbf{Top} is symmetric monoidal closed with respect to product, why didn't you just work there from the start?} Because \textbf{Top} is cartesian monoidal, which in particular means that there is only one test (the map into the terminal singleton topology), and worse, all states are tensor-separable. The latter fact means that we cannot reason natively in diagrams about correlated states, which are extremely useful representing entangled quantum states [dodo], and for reasoning about spatial relations [talkspace]. I'll briefly explain the gist of the analogy in prose because it is already presented formally in the cited works and elaborated in [bobcomp]. The Fregean notion of compositionality is roughly that to know a composite system is equivalent to knowing all of its parts, and diagrammatically this amounts to tensor-separability, which arises as a consequence of cartesian monoidality. Schr\"{o}dinger suggests an alternative of compositionality via a lesson from entangled states in quantum mechanics: \emph{perfect knowledge of the whole does not entail perfect knowledge of the parts.} Let's say we have information about a composite system if we can restrict the range of possible outcomes; this is the case for the bell-state, where we know that there is an even chance both qubits measure up or both measure down, and we can rule out mismatched measurements. However, discarding one entangled qubit from a bell-state means we only know that the remaining qubit has a 50/50 of measuring up or down, which is the minimal state of information we can have about a qubit. So we have a case where we can know things about the whole, but nothing about its parts. A more familiar example from everyday life is if I ask you to imagine \texttt{a cup on a table in a room}. There are many ways to envision or realise this scenario in your mind's eye, all drawn from a restricted set of permissable positions of the cup and the table in some room. The spatial locations of the cup and table are entangled, in that you can only consider the positions of both together. If you discard either the cup or the table from your memory, there are no restrictions about where the other object could be in the room; that is, the meaning of the utterance is not localised in any of the parts, it resides in the entangled whole.